require('dotenv').config()
import { CreateBenefitSession, DecryptBenefitTrandata } from '../src'

const TRANDATA =
	'FEA9762DE5DF5E1EF47D796D49A0D1281CC42367E7ABCEBB724B845F37C40D0B8300331588123F8B46DAE84AE633FB8E0DE485BC5ACBE5D1058AA2C8218E556F2FF6C7FA7DDBB54EE60FB79D97384D7045A05C8408D87963FCA6098E7953FF427DD8A51EFC264ADBCDBEE5CE1A37BC9AA766FEC444405193733C10AE09C2E26317A970E0A491F65C18A8BFCD4DFDCB753FC1A3AE1A2EC6899D8774E33C4B952A6426BCE3638D748B113BBA7638A1D7B9D4475348084A186C47C530113AB8363BFFA0C8BADCC8C597B741C6546A8E70D3F9440830A9545CB6553B947E9D66E95492A480CFAD5C7DCB9ACB69AA363AE99221C88AF17611ADA4722A8CA38046131C66F4987DDF9F657F39682FA23E2E94CA96DB4D26358859EE37187109B4577FA696D260E39F6245383B2A160388457134DCA8F8CA87BB6D8A2E5E6B1F79A6075F09B05D79FDCF11DC15281503FCBAA3D84E6293B453280D6E20AE45D27396296D7817B62113E26DF6E9E27F5C3D72A91028CE315DCE76FE9734B513AFC2787261F77A1217472F2BDE71553C86AE555A216712542CB96499EF1770C489383023AF76A93220B5DDEC6554569C91CBC7D3A8253B3E6E5D19EF3B664A5CFFC16DF0FC96122024873A68ADB6BBA4CD722CFC39A26B35C4588848CD91BC8CEEA116F8E55DD67448C39826B5E28F21FB28AEDDAF3054D59410F4143B92D92153B86172E69FDE6587ABB0434A0D3AF7A5D36CA5642FD8AE0552ED4DFB084BCF671B6D8EBD'

// ENVIRONMENT VARIABLES ARE SET FOR THE TESTS

describe('createSession', () => {
	it('should create a session', async () => {
		const session = await CreateBenefitSession({
			order: { id: '123', total: 100 },
		})

		console.log(session)

		expect(typeof session).toBe('string')
	})
})

describe('decryptTrandata', () => {
	it('should decrypt the trandata', async () => {
		const result = DecryptBenefitTrandata({
			buffer: Buffer.from(`trandata=${TRANDATA}`, 'utf-8'),
		})

		console.log(result)

		expect(typeof result.id).toBe('string')
	})
})
